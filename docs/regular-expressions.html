<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Topic 2 Regular Expressions | COMP/STAT 112: Introduction to Data Science</title>
  <meta name="description" content="This is the class website for Introduction to Data Science at Macalester College for Fall 2022." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Topic 2 Regular Expressions | COMP/STAT 112: Introduction to Data Science" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/logo.png" />
  <meta property="og:description" content="This is the class website for Introduction to Data Science at Macalester College for Fall 2022." />
  <meta name="github-repo" content="bcheggeseth/112_fall_2022/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Topic 2 Regular Expressions | COMP/STAT 112: Introduction to Data Science" />
  
  <meta name="twitter:description" content="This is the class website for Introduction to Data Science at Macalester College for Fall 2022." />
  <meta name="twitter:image" content="/images/logo.png" />




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro-to-r-rstudio-and-r-markdown.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="custom_styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href = "./">COMP/STAT 112: Introduction to Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="" data-path="course-schedule.html"><a href="course-schedule.html"><i class="fa fa-check"></i>Course Schedule</a></li>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html"><i class="fa fa-check"></i>Learning Goals</a>
<ul>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#general-skills"><i class="fa fa-check"></i>General Skills</a></li>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#course-topics"><i class="fa fa-check"></i>Course Topics</a>
<ul>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#foundation"><i class="fa fa-check"></i>Foundation</a></li>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#data-acquisition"><i class="fa fa-check"></i>Data Acquisition</a></li>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#data-wrangling"><i class="fa fa-check"></i>Data Wrangling</a></li>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#data-visualization"><i class="fa fa-check"></i>Data Visualization</a></li>
<li class="chapter" data-level="" data-path="learning-goals.html"><a href="learning-goals.html#data-modeling"><i class="fa fa-check"></i>Data Modeling</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Foundation</b></span></li>
<li class="chapter" data-level="1" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html"><i class="fa fa-check"></i><b>1</b> Intro to R, RStudio, and R Markdown</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#learning-goals-1"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#getting-started-in-rstudio"><i class="fa fa-check"></i>Getting Started in RStudio</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#download-r-rstudio"><i class="fa fa-check"></i>Download R &amp; RStudio</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#a-quick-tour-of-rstudio"><i class="fa fa-check"></i>A quick tour of RStudio</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#tidy-data"><i class="fa fa-check"></i>Tidy Data</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#data-basics-in-rstudio"><i class="fa fa-check"></i>Data Basics in RStudio</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#r-markdown-and-reproducible-research"><i class="fa fa-check"></i>R Markdown and Reproducible Research</a></li>
<li class="chapter" data-level="" data-path="intro-to-r-rstudio-and-r-markdown.html"><a href="intro-to-r-rstudio-and-r-markdown.html#practice"><i class="fa fa-check"></i>Practice</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>2</b> Regular Expressions</a>
<ul>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#learning-goals-2"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#regular-expressions-and-character-strings"><i class="fa fa-check"></i>Regular Expressions and Character Strings</a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#wrangling-with-regular-expressions-in-r"><i class="fa fa-check"></i>Wrangling with Regular Expressions in <code>R</code></a>
<ul>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#search-and-replace-patterns-with-gsub-base-or-str_replace-or-str_replace_all-stringr"><i class="fa fa-check"></i>Search and replace patterns with <code>gsub</code> (<code>base</code>) or <code>str_replace</code> or <code>str_replace_all</code> (<code>stringr</code>)</a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#detect-patterns-with-grep-and-grepl-base-or-str_detect-stringr"><i class="fa fa-check"></i>Detect patterns with <code>grep</code> and <code>grepl</code> (<code>base</code>) or <code>str_detect</code> (<code>stringr</code>)</a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#locate-patterns-with-regexpr-or-str_locate"><i class="fa fa-check"></i>Locate patterns with <code>regexpr</code> or <code>str_locate</code></a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#extract-patterns-with-str_extract-and-str_extract_all"><i class="fa fa-check"></i>Extract patterns with <code>str_extract</code> and <code>str_extract_all</code></a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#count-the-number-of-characters-with-str_length"><i class="fa fa-check"></i>Count the number of characters with <code>str_length</code></a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#convert-a-string-to-all-lower-case-letters-with-str_to_lower"><i class="fa fa-check"></i>Convert a string to all lower case letters with <code>str_to_lower</code></a></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#split-strings-with-separate"><i class="fa fa-check"></i>Split strings with <code>separate</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="regular-expressions.html"><a href="regular-expressions.html#practice-fall-2021-enrollment-exploration"><i class="fa fa-check"></i>Practice: Fall 2021 Enrollment Exploration</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">COMP/STAT 112: Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="regular-expressions" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Topic 2</span> Regular Expressions<a href="regular-expressions.html#regular-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="learning-goals-2" class="section level2 unnumbered hasAnchor">
<h2>Learning Goals<a href="regular-expressions.html#learning-goals-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Develop comfort in working with strings of text data</li>
<li>Use regular expressions to search and replace, detect patterns, locate patterns, extract patterns, and separate text with the <code>stringr</code> package.</li>
</ul>
<p>You can download a template .Rmd of this activity <a href="template_rmd/16-Regex.Rmd">here</a>.</p>
</div>
<div id="regular-expressions-and-character-strings" class="section level2 unnumbered hasAnchor">
<h2>Regular Expressions and Character Strings<a href="regular-expressions.html#regular-expressions-and-character-strings" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Regular expressions allow us to describe character patterns. Regular expressions allow us to:<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<ul>
<li><strong>Search</strong> for particular items within a large body of text. For example, you may wish to identify and extract all email addresses.</li>
<li><strong>Replace</strong> particular items. For example, you may wish to clean up some poorly formatted HTML by replacing all uppercase tags with lowercase equivalents.</li>
<li><strong>Validate</strong> input. For example, you may want to check that a password meets certain criteria such as, a mix of uppercase and lowercase, digits and punctuation.</li>
<li><strong>Coordinate</strong> actions. For example, you may wish to process certain files in a directory, but only if they meet particular conditions.</li>
<li><strong>Reformat</strong> text. For example, you may want to split strings into different parts, each to form new variables.</li>
<li>and more…</li>
</ul>
<p><strong>Start by doing this <a href="https://regexone.com/">interactive tutorial</a>.</strong> Note that neither the tutorial nor regular expressions more generally are specific to <code>R</code>. Some of the syntax in the tutorial is slightly different from what we’ll use in <code>R</code>, but it will still help you get acclimated to the main ideas of regular expressions.</p>
</div>
<div id="wrangling-with-regular-expressions-in-r" class="section level2 unnumbered hasAnchor">
<h2>Wrangling with Regular Expressions in <code>R</code><a href="regular-expressions.html#wrangling-with-regular-expressions-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that we have some idea how regular expressions work, let’s examine how to use them to achieve various tasks in <code>R</code>. It will be helpful to have your <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/strings.pdf">cheat sheet</a> handy. Many of these tasks can either be accomplished with functions from the <code>base</code> (built-in) package in <code>R</code> or from the <code>stringr</code> package, which is part of the Tidyverse. In general, the <code>stringr</code> functions are faster, which will be noticeable when processing a large amount of text data.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="regular-expressions.html#cb17-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="st">&quot;The quick brown fox jumps over the lazy dog.&quot;</span></span>
<span id="cb17-2"><a href="regular-expressions.html#cb17-2" aria-hidden="true" tabindex="-1"></a>example2 <span class="ot">&lt;-</span> <span class="st">&quot;Two roads diverged in a yellow wood, / And sorry I could not travel both / And be one traveler, long I stood / And looked down one as far as I could&quot;</span></span>
<span id="cb17-3"><a href="regular-expressions.html#cb17-3" aria-hidden="true" tabindex="-1"></a>example3 <span class="ot">&lt;-</span> <span class="st">&quot;This is a test&quot;</span></span></code></pre></div>
<div id="search-and-replace-patterns-with-gsub-base-or-str_replace-or-str_replace_all-stringr" class="section level3 unnumbered hasAnchor">
<h3>Search and replace patterns with <code>gsub</code> (<code>base</code>) or <code>str_replace</code> or <code>str_replace_all</code> (<code>stringr</code>)<a href="regular-expressions.html#search-and-replace-patterns-with-gsub-base-or-str_replace-or-str_replace_all-stringr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To search for a pattern and replace it, we can use the function <code>gsub</code>. Here are some examples:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="regular-expressions.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;quick&quot;</span>, <span class="st">&quot;really quick&quot;</span>, example)</span></code></pre></div>
<pre><code>## [1] &quot;The really quick brown fox jumps over the lazy dog.&quot;</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="regular-expressions.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;fox|dog&quot;</span>, <span class="st">&quot;****&quot;</span>, example)</span></code></pre></div>
<pre><code>## [1] &quot;The quick brown **** jumps over the lazy ****.&quot;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="regular-expressions.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;(fox|dog).$&quot;</span>, <span class="st">&quot;****&quot;</span>, example) <span class="co"># at end of sentence only, &quot;.&quot; for any character</span></span></code></pre></div>
<pre><code>## [1] &quot;The quick brown fox jumps over the lazy ****&quot;</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="regular-expressions.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;(fox|dog)</span><span class="sc">\\</span><span class="st">.$&quot;</span>, <span class="st">&quot;****&quot;</span>, example) <span class="co"># at end of sentence only, &quot;\\.&quot; only for a period</span></span></code></pre></div>
<pre><code>## [1] &quot;The quick brown fox jumps over the lazy ****&quot;</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="regular-expressions.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;the&quot;</span>, <span class="st">&quot;a&quot;</span>, example) <span class="co"># case-sensitive only matches one</span></span></code></pre></div>
<pre><code>## [1] &quot;The quick brown fox jumps over a lazy dog.&quot;</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="regular-expressions.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;[Tt]he&quot;</span>, <span class="st">&quot;a&quot;</span>, example) <span class="co"># will match either t or T; could also make &quot;a&quot; conditional on capitalization of t</span></span></code></pre></div>
<pre><code>## [1] &quot;a quick brown fox jumps over a lazy dog.&quot;</code></pre>
<p>In the <code>stringr</code> package, <code>str_replace</code> only replaces the first matched pattern, while <code>str_replace_all</code> replaces all. Here is a repetition of a few of the examples from above:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="regular-expressions.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(example, <span class="st">&quot;[Tt]he&quot;</span>, <span class="st">&quot;a&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;a quick brown fox jumps over the lazy dog.&quot;</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="regular-expressions.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(example, <span class="st">&quot;[Tt]he&quot;</span>, <span class="st">&quot;a&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;a quick brown fox jumps over a lazy dog.&quot;</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="regular-expressions.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(example, <span class="st">&quot;fox|dog&quot;</span>, <span class="st">&quot;****&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;The quick brown **** jumps over the lazy ****.&quot;</code></pre>
</div>
<div id="detect-patterns-with-grep-and-grepl-base-or-str_detect-stringr" class="section level3 unnumbered hasAnchor">
<h3>Detect patterns with <code>grep</code> and <code>grepl</code> (<code>base</code>) or <code>str_detect</code> (<code>stringr</code>)<a href="regular-expressions.html#detect-patterns-with-grep-and-grepl-base-or-str_detect-stringr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="regular-expressions.html#cb36-1" aria-hidden="true" tabindex="-1"></a>examples <span class="ot">&lt;-</span> <span class="fu">c</span>(example, example2, example3)</span>
<span id="cb36-2"><a href="regular-expressions.html#cb36-2" aria-hidden="true" tabindex="-1"></a>pat <span class="ot">&lt;-</span> <span class="st">&quot;[^aeiouAEIOU ]{3}&quot;</span> <span class="co"># Regular expression for three straight consonants. Note that I&#39;ve excluded spaces as well</span></span>
<span id="cb36-3"><a href="regular-expressions.html#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(pat, examples) <span class="co"># Are there three consonants in a row?</span></span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="regular-expressions.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(pat, examples) <span class="co"># Which entries contain this pattern?</span></span></code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="regular-expressions.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(examples, pat) <span class="co"># same as grepl</span></span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE</code></pre>
</div>
<div id="locate-patterns-with-regexpr-or-str_locate" class="section level3 unnumbered hasAnchor">
<h3>Locate patterns with <code>regexpr</code> or <code>str_locate</code><a href="regular-expressions.html#locate-patterns-with-regexpr-or-str_locate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="regular-expressions.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">regexpr</span>(pat, example) <span class="co"># starting position and length of first match</span></span></code></pre></div>
<pre><code>## [1] 23
## attr(,&quot;match.length&quot;)
## [1] 3
## attr(,&quot;index.type&quot;)
## [1] &quot;chars&quot;
## attr(,&quot;useBytes&quot;)
## [1] TRUE</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="regular-expressions.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_locate</span>(example, pat) <span class="co"># starting position and ending position of first match</span></span></code></pre></div>
<pre><code>##      start end
## [1,]    23  25</code></pre>
<p>Let’s check the answer:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="regular-expressions.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(example, <span class="dv">23</span>, <span class="dv">25</span>)</span></code></pre></div>
<pre><code>## [1] &quot;mps&quot;</code></pre>
</div>
<div id="extract-patterns-with-str_extract-and-str_extract_all" class="section level3 unnumbered hasAnchor">
<h3>Extract patterns with <code>str_extract</code> and <code>str_extract_all</code><a href="regular-expressions.html#extract-patterns-with-str_extract-and-str_extract_all" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="regular-expressions.html#cb48-1" aria-hidden="true" tabindex="-1"></a>pat2 <span class="ot">&lt;-</span> <span class="st">&quot;[^aeiouAEIOU ][aeiouAEIOU]{2}[^aeiouAEIOU ]{1}&quot;</span> <span class="co"># consonant followed by two vowels followed by a consonant</span></span>
<span id="cb48-2"><a href="regular-expressions.html#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(example2, pat2) <span class="co"># extract first match</span></span></code></pre></div>
<pre><code>## [1] &quot;road&quot;</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="regular-expressions.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(example2, pat2, <span class="at">simplify =</span> <span class="cn">TRUE</span>) <span class="co"># extract all matches</span></span></code></pre></div>
<pre><code>##      [,1]   [,2]   [,3]   [,4]   [,5]   [,6]  
## [1,] &quot;road&quot; &quot;wood&quot; &quot;coul&quot; &quot;tood&quot; &quot;look&quot; &quot;coul&quot;</code></pre>
</div>
<div id="count-the-number-of-characters-with-str_length" class="section level3 unnumbered hasAnchor">
<h3>Count the number of characters with <code>str_length</code><a href="regular-expressions.html#count-the-number-of-characters-with-str_length" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="regular-expressions.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(example2)</span></code></pre></div>
<pre><code>## [1] 148</code></pre>
</div>
<div id="convert-a-string-to-all-lower-case-letters-with-str_to_lower" class="section level3 unnumbered hasAnchor">
<h3>Convert a string to all lower case letters with <code>str_to_lower</code><a href="regular-expressions.html#convert-a-string-to-all-lower-case-letters-with-str_to_lower" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="regular-expressions.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(example2)</span></code></pre></div>
<pre><code>## [1] &quot;two roads diverged in a yellow wood, / and sorry i could not travel both / and be one traveler, long i stood / and looked down one as far as i could&quot;</code></pre>
</div>
<div id="split-strings-with-separate" class="section level3 unnumbered hasAnchor">
<h3>Split strings with <code>separate</code><a href="regular-expressions.html#split-strings-with-separate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="regular-expressions.html#cb56-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">ex =</span> example2)</span>
<span id="cb56-2"><a href="regular-expressions.html#cb56-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">separate</span>(df, ex, <span class="fu">c</span>(<span class="st">&quot;line1&quot;</span>, <span class="st">&quot;line2&quot;</span>, <span class="st">&quot;line3&quot;</span>, <span class="st">&quot;line4&quot;</span>), <span class="at">sep =</span> <span class="st">&quot; / &quot;</span>)</span>
<span id="cb56-3"><a href="regular-expressions.html#cb56-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>line1</span></code></pre></div>
<pre><code>## [1] &quot;Two roads diverged in a yellow wood,&quot;</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="regular-expressions.html#cb58-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>line2</span></code></pre></div>
<pre><code>## [1] &quot;And sorry I could not travel both&quot;</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="regular-expressions.html#cb60-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>line3</span></code></pre></div>
<pre><code>## [1] &quot;And be one traveler, long I stood&quot;</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="regular-expressions.html#cb62-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>line4</span></code></pre></div>
<pre><code>## [1] &quot;And looked down one as far as I could&quot;</code></pre>
<p>Note: The function <code>separate</code> is in the <code>tidyr</code> package.</p>
</div>
</div>
<div id="practice-fall-2021-enrollment-exploration" class="section level2 unnumbered hasAnchor">
<h2>Practice: Fall 2021 Enrollment Exploration<a href="regular-expressions.html#practice-fall-2021-enrollment-exploration" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The tibble <code>courses</code> has the Fall 2021 enrollment information from the Macalester Registrar’s website, which we scraped in an earlier activity.</p>
<table>
<caption>
<span id="tab:unnamed-chunk-36">Table 2.1: </span>First six entries in the Fall 2021 Macalester course info data.
</caption>
<thead>
<tr>
<th style="text-align:left;">
number
</th>
<th style="text-align:left;">
crn
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:left;">
days
</th>
<th style="text-align:left;">
time
</th>
<th style="text-align:left;">
room
</th>
<th style="text-align:left;">
instructor
</th>
<th style="text-align:left;">
avail_max
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AMST 194-01
</td>
<td style="text-align:left;">
10068
</td>
<td style="text-align:left;">
The Obama Presidency
</td>
<td style="text-align:left;">
M W F
</td>
<td style="text-align:left;">
10:50 am-11:50 am
</td>
<td style="text-align:left;">
THEATR 002
</td>
<td style="text-align:left;">
Duchess Harris
</td>
<td style="text-align:left;">
0 / 16
</td>
</tr>
<tr>
<td style="text-align:left;">
AMST 194-02
</td>
<td style="text-align:left;">
10069
</td>
<td style="text-align:left;">
Introduction to Asian American Studies
</td>
<td style="text-align:left;">
M W F
</td>
<td style="text-align:left;">
01:10 pm-02:10 pm
</td>
<td style="text-align:left;">
HUM 212
</td>
<td style="text-align:left;">
Jake Nagasawa
</td>
<td style="text-align:left;">
Closed 7 / 18
</td>
</tr>
<tr>
<td style="text-align:left;">
AMST 209-01
</td>
<td style="text-align:left;">
10781
</td>
<td style="text-align:left;">
Civil Rights Movement
</td>
<td style="text-align:left;">
T R
</td>
<td style="text-align:left;">
01:20 pm-02:50 pm
</td>
<td style="text-align:left;">
MAIN 111
</td>
<td style="text-align:left;">
Walter Greason
</td>
<td style="text-align:left;">
4 / 26
</td>
</tr>
<tr>
<td style="text-align:left;">
AMST 219-01
</td>
<td style="text-align:left;">
10782
</td>
<td style="text-align:left;">
In Motion: African Americans in the US (African Americans in Digital Technologies)
</td>
<td style="text-align:left;">
T R
</td>
<td style="text-align:left;">
03:00 pm-04:30 pm
</td>
<td style="text-align:left;">
MAIN 111
</td>
<td style="text-align:left;">
Walter Greason
</td>
<td style="text-align:left;">
4 / 25
</td>
</tr>
<tr>
<td style="text-align:left;">
AMST 225-01
</td>
<td style="text-align:left;">
10420
</td>
<td style="text-align:left;">
Native History to 1871
</td>
<td style="text-align:left;">
T R
</td>
<td style="text-align:left;">
09:40 am-11:10 am
</td>
<td style="text-align:left;">
THEATR 203
</td>
<td style="text-align:left;">
Katrina Phillips
</td>
<td style="text-align:left;">
1 / 25
</td>
</tr>
<tr>
<td style="text-align:left;">
AMST 240-01
</td>
<td style="text-align:left;">
10271
</td>
<td style="text-align:left;">
Race, Culture, and Ethnicity in Education
</td>
<td style="text-align:left;">
T R
</td>
<td style="text-align:left;">
01:20 pm-02:50 pm
</td>
<td style="text-align:left;">
THEATR 201
</td>
<td style="text-align:left;">
Jonathan Hamilton
</td>
<td style="text-align:left;">
Closed 0 / 25
</td>
</tr>
</tbody>
</table>
<div class="exercise">
<p><span id="exr:unnamed-chunk-37" class="exercise"><strong>Exercise 2.1  (Rearrange data table) </strong></span>Make the following changes to the <code>courses</code> data table:</p>
<ol style="list-style-type: lower-alpha">
<li>Split <code>number</code> into three separate columns: <code>dept</code>, <code>number</code>, and <code>section</code>.</li>
<li>Split the <code>avail_max</code> variable into two separate variables: <code>avail</code> and <code>max</code>. It might be helpful to first remove all appearances of “Closed”.</li>
<li>Use <code>avail</code> and <code>max</code> to generate a new variable called <code>enrollment</code>.</li>
<li>Split the <code>time</code> variable into two separate columns: <code>start_time</code> and <code>end_time</code>. Convert all of these times into continuous 24 hour times (e.g., 2:15 pm should become 14.25). <em>Hint: check out the function <code>parse_date_time</code>.</em></li>
</ol>
</div>
<div class="exercise">
<p><span id="exr:unnamed-chunk-38" class="exercise"><strong>Exercise 2.2  (WA courses) </strong></span>Make a histogram showing the number of Fall 2021 sections satisfying the Writing WA requirement, sorted by department code.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
</div>
<p><br></p>
<p>In the next series of exercises, we are going to build up an analysis to examine the number of student enrollments for each faculty member.</p>
<div class="exercise">
<p><span id="exr:unnamed-chunk-39" class="exercise"><strong>Exercise 2.3  (Filter cases) </strong></span>For this particular analysis, we do not want to consider certain types of sections. Remove all of the following from the data table:</p>
<ol style="list-style-type: lower-alpha">
<li>All sections in <code>PE</code> or <code>INTD</code>.</li>
<li>All music ensembles and dance practicum sections (these are all of the MUSI and THDA classes with numbers less than 100).</li>
<li>All lab sections. This is one is a bit tricky. You can search for “Lab” or “Laboratory”, but be careful not to eliminate courses with words such as “Labor”. Some of these have section numbers that end in “-L1”“, for example.</li>
</ol>
</div>
<div class="exercise">
<p><span id="exr:nt" class="exercise"><strong>Exercise 2.4  (Handle cross-listed courses) </strong></span>Some sections are listed under multiple different departments, and you will find the same instructor, time, enrollment data, etc. For this activity, we only want to include each actual section once and it doesn’t really matter which department code we associate with this section. Eliminate all duplicates, keeping each actual section just once. Hint: look into the <code>R</code> command <code>distinct</code>, and think carefully about how to find duplicates.</p>
</div>
<div class="exercise">
<p><span id="exr:unnamed-chunk-40" class="exercise"><strong>Exercise 2.5  (Co-taught courses) </strong></span>Make a table with all Fall 2021 co-taught courses (i.e., more than one instructor).</p>
</div>
<div class="exercise">
<p><span id="exr:unnamed-chunk-41" class="exercise"><strong>Exercise 2.6  (Faculty enrollments) </strong></span>Make a table where each row contains a faculty, the number of sections they are teaching in Fall 2021, and the total enrollments in those section. Sort the table from highest total enrollments to lowest.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
</div>
<div class="exercise">
<p><span id="exr:unnamed-chunk-42" class="exercise"><strong>Exercise 2.7  (Evening courses) </strong></span>Create and display a new table with all night courses (i.e., a subset of the table you wrangled by the end of Exercise <a href="regular-expressions.html#exr:nt">2.4</a>). Also make a histogram showing the number of these courses by day of the week.</p>
</div>

</div>
</div>








<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Source: <a href="https://ryanstutorials.net/regular-expressions-tutorial/">regular expression tutorial</a>.<a href="regular-expressions.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>For this exercise, you can count cross-listed courses towards both departments’ WA counts.<a href="regular-expressions.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>For the purposes of this exercise, we are just going to leave co-taught courses as is so that you will have an extra row for each pair or triplet of instructors. Alternatives would be to allocate the enrollment number to each of the faculty members or to split it up between the members. The first option would usually be the most appropriate, although it might depend on the course.<a href="regular-expressions.html#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro-to-r-rstudio-and-r-markdown.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
